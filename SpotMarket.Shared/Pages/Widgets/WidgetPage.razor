@page "/widgets"
@inject NavStateService NavState


<GroupActivityWidget Data="activeGroupData" />
<GroupKpiWidget />
<SubGroupListWidget/>
<MarketWatchlistWidget/>
<MarketTickerWidget/>
<JournalInspiredWidget/>
<MarketForecastWidget/>
<MarketComplicationsWidget/>
<MarketAwardsWidget/>
<MarketProgressBarWidget/>
<MarketAlarmsWidget/>
<MarketCompassWidget/>
<MarketConditionsWidget/>
<MarketControlWidget/>
<MarketMetricsWidget/>
<NewsWidget Data="newsData" />
<IndustryComparisonWidget/>
<MarketRingsWidget/>
<MarketScheduleWidget/>
<MarketSignalsWidget/>
<MarketShortcutsWidget Data="marketShortcutsData"/>
<MarketSnapshotsWidget/>
<MarketStatsRowWidget/>
<MarketVitalsWidget/>
<WatchlistWidget/>
@code {
    

    private IEnumerable<MainPlayer> mainPlayersData = new List<MainPlayer>();
    private MarketExcitementData? marketExcitementData;
    private MarketMoversData? marketMoversData;
    private MarketPulseData? marketPulseData;
    private MarketSentimentData? marketSentimentData;
    private SupplyRiskData? supplyRiskData;
    private TradingHallsData? tradingHallsData;
    private NewsData? newsData;
    private CommodityStatusData? commodityStatusData;
    private List<MarketInfo>? marketInfoItems;
    private List<MarketActivity>? marketActivityItems;
    private MarketContactsData? marketContactsData;
    private MarketHeatmapData? marketHeatmapData;
    private MarketShortcutsData? marketShortcutsData;
    private GroupActivityData? activeGroupData;

    protected override void OnInitialized()
    {
        NavState.SetNavState("ویجت‌ها", true);
        loadDemoData();
    }

    private void loadDemoData()
    {
        mainPlayersData = new List<MainPlayer>
        {
           new()
           {
               Type = MainPlayerType.Broker,
               Name = "کارگزاری مفید",
               IconCssClass = "bi bi-person-workspace",
               MarketShare = 18.4m
           },
           new()
           {
               Type = MainPlayerType.Supplier,
               Name = "فولاد مبارکه",
               IconCssClass = "bi bi-buildings-fill",
               MarketShare = 25.1m
           }
        };
        marketExcitementData = new MarketExcitementData
        {
           Title = "تقاضای بالا",
           Description = "بخش عمده معاملات امروز به روش حراج باز انجام شده که نشان‌دهنده رقابت شدید و هیجان در بازار است.",
           Percentage = 70,
           Label = "حراج"
        };
        marketMoversData = new MarketMoversData
        {
           CompetitionItems = new List<MarketMoverItem>
           {
               new() { Rank = 1, Title = "ورق گالوانیزه", Subtitle = "فولاد مبارکه", Value = "+۱۲.۵٪", ValueState = ValueState.Positive },
               new() { Rank = 2, Title = "مس کاتد", Subtitle = "شرکت ملی مس", Value = "+۹.۸٪", ValueState = ValueState.Positive }
           },
           DemandItems = new List<MarketMoverItem>
           {
               new() { Rank = 1, Title = "سیمان تیپ ۲", Subtitle = "سیمان تهران", Value = "۳.۵x", ValueState = ValueState.Neutral },
               new() { Rank = 2, Title = "پلی‌پروپیلن", Subtitle = "پتروشیمی مارون", Value = "۲.۸x", ValueState = ValueState.Neutral }
           }
        };
        marketPulseData = new MarketPulseData
        {
            Items = new List<PulseCardItem>
            {
                new() { Title = "ارزش معاملات", Value = "۱۲.۳ همت", Change = "+۱.۵٪", ChangeState = ValueState.Positive },
                new() { Title = "شاخص رقابت", Value = "۸.۲٪", Change = "-۰.۳٪", ChangeState = ValueState.Negative }
            }
        };
        marketSentimentData = new MarketSentimentData
        {
           Items = new List<SentimentItem>
           {
               new() { Name = "نقدی", Percentage = 65, ColorCssVariable = "var(--primary-color)" },
               new() { Name = "سلف", Percentage = 25, ColorCssVariable = "var(--success-color)" },
               new() { Name = "نسیه", Percentage = 10, ColorCssVariable = "var(--warning-color)" }
           }
        };
        supplyRiskData =  new SupplyRiskData
        {
           Items = new List<SupplyRiskItem>
           {
               new()
               {
                   Title = "مس کاتد",
                   Subtitle = "ریسک بالا",
                   RiskLevel = RiskLevel.High,
                   Value = "۱ عرضه‌کننده"
               },
               new()
               {
                   Title = "میلگرد",
                   Subtitle = "ریسک پایین",
                   RiskLevel = RiskLevel.Low,
                   Value = "۱۲ عرضه‌کننده"
               }
           }
        };
        tradingHallsData = new TradingHallsData
        {
           Items = new List<TradingHallItem>
           {
               new() { Title = "صنعتی", IconCssClass = "bi bi-building", IconBgCssClass = "industrial", Value = "۵.۸ همت", Change = "+۳.۱٪", ChangeState = ValueState.Positive },
               new() { Title = "پتروشیمی", IconCssClass = "bi bi-droplet-fill", IconBgCssClass = "petro", Value = "۴.۲ همت", Change = "-۱.۲٪", ChangeState = ValueState.Negative },
               new() { Title = "کشاورزی", IconCssClass = "bi bi-tree-fill", IconBgCssClass = "agri", Value = "۰.۹ همت", Change = "+۵.۴٪", ChangeState = ValueState.Positive }
           }
        };
        newsData = new NewsData
        {
            Items = new List<NewsItem>
            {
                new()
                {
                    Category = NewsCategory.HotGroup,
                    MarketGroup = MarketGroup.Steel,
                    Source = "گروه داغ • فولاد",
                    Title = "افزایش تقاضا برای ورق سرد، قیمت‌ها را در گروه فولاد بالا برد"
                },
                new()
                {
                    Category = NewsCategory.SupplyAnnouncement,
                    MarketGroup = MarketGroup.Cement,
                    Source = "اطلاعیه عرضه",
                    Title = "عرضه جدید سیمان تیپ ۲ تهران برای هفته آینده تایید شد"
                },
                new()
                {
                    Category = NewsCategory.HotGroup,
                    MarketGroup = MarketGroup.Petrochemical,
                    Source = "گروه داغ • پتروشیمی",
                    Title = "رقابت سنگین بر سر پلیمرهای مهندسی در تالار پتروشیمی"
                }
            }
        };
        commodityStatusData = new CommodityStatusData
            {
                Items = new List<CommodityStatusItem>
                {
                    new() { Name = "ضایعات فولاد", MainGroupName = "صنعتی", OfferCount = 5, DemandStatus = DemandStatus.High },
                    new() { Name = "زعفران", MainGroupName = "کشاورزی", OfferCount = 12, DemandStatus = DemandStatus.Low },
                    new() { Name = "سنگ آهن", MainGroupName = "معدنی", OfferCount = 8, DemandStatus = DemandStatus.High },
                    new() { Name = "پلیمر", MainGroupName = "پتروشیمی", OfferCount = 31, DemandStatus = DemandStatus.High },
                    new() { Name = "قیر خالص", MainGroupName = "فرآورده های نفتی", OfferCount = 7, DemandStatus = DemandStatus.Medium },
                }
            };
        marketInfoItems = new List<MarketInfo>
        {
            new MarketInfo("صنعتی", 1, "فولاد، مس، آلومینیوم", "Industrial", "bi-building", "industrial", "high", "داغ"),
            new MarketInfo("کشاورزی", 2, "زعفران، پسته، جو", "Agriculture", "bi-tree-fill", "agri", "low", "آرام"),
            new MarketInfo("پتروشیمی و فرآورده های نفتی", 3, "پلیمرها، مواد شیمیایی، نفت", "Petrochemical-and-Oil-Products", "bi-droplet-fill", "petro", "medium", "متوسط"),
            new MarketInfo("معدنی", 4, "سنگ آهن، زغال سنگ", "Mineral", "bi-gem", "mineral", "medium", "متوسط"),
            new MarketInfo("فرآورده های نفتی", 5, "قیر، روغن، گاز", "Oil-Products", "bi-fuel-pump-fill", "oil-products", "high", "داغ"),
            new MarketInfo("اموال غیر منقول", 6, "ساختمان، زمین، مستغلات", "Real-Estate", "bi-house-door-fill", "real-estate", "low", "آرام"),
            new MarketInfo("بازار فرعی", 7, "کالاهای متنوع", "Secondary-Market", "bi-shop", "secondary", "neutral", "خنثی")
        };
        marketContactsData = new MarketContactsData
            {
                Items = new List<MarketContactItem>
                {
                    new() { Title = "فولاد", Subtitle = "بازار داغ", IconCssClass = "bi bi-building", AvatarCssClass = "steel" },
                    new() { Title = "پتروشیمی", Subtitle = "روند مثبت", IconCssClass = "bi bi-droplet-fill", AvatarCssClass = "petro" },
                    new() { Title = "سیمان", Subtitle = "متعادل", IconCssClass = "bi bi-cone-striped", AvatarCssClass = "cement" },
                    new() { Title = "کشاورزی", Subtitle = "روند منفی", IconCssClass = "bi bi-tree-fill", AvatarCssClass = "agri" }
                }
            };
        marketActivityItems = new List<MarketActivity>
        {
            new MarketActivity("صنعتی", "industrial", 0.92, "۹۲٪ انجام شده", "۵.۸ همت"),
            new MarketActivity("پتروشیمی", "petro", 0.78, "۷۸٪ انجام شده", "۴.۲ همت"),
            new MarketActivity("کشاورزی", "agri", 0.65, "۶۵٪ انجام شده", "۱.۱ همت")
        };
        marketHeatmapData  = new MarketHeatmapData
        {
            Items = new List<MarketHeatmapItem>
            {
                new() { Title = "فولاد", Rank = MarketHeatRank.High, Subtitle = "بیشترین ارزش معاملات", Value = "+۱۲.۵٪" },
                new() { Title = "پتروشیمی", Rank = MarketHeatRank.High, Value = "۲.۵x" },
                new() { Title = "سیمان", Rank = MarketHeatRank.Medium, Subtitle = "نرخ تحقق", Value = "۹۸٪" },
                new() { Title = "مس", Rank = MarketHeatRank.Medium },
                new() { Title = "آلومینیوم", Rank = MarketHeatRank.Low },
                new() { Title = "کشاورزی", Rank = MarketHeatRank.Low },
                new() { Title = "قیر", Rank = MarketHeatRank.Neutral },
            }
        };

        marketShortcutsData = new MarketShortcutsData
            {
                Items = new List<MarketShortcutItem>
                {
                    new() { Title = "اموال غیر منقول", IconCssClass = "bi bi-house-door-fill", ThemeCssClass = "real-estate" },
                    new() { Title = "بازار فرعی", IconCssClass = "bi bi-shop", ThemeCssClass = "secondary" },
                    new() { Title = "صنعتی", IconCssClass = "bi bi-building", ThemeCssClass = "industrial" },
                    new() { Title = "فرآورده های نفتی", IconCssClass = "bi bi-fuel-pump-fill", ThemeCssClass = "oil-products" },
                    new() { Title = "معدنی", IconCssClass = "bi bi-gem", ThemeCssClass = "mineral" },
                    new() { Title = "پتروشیمی", IconCssClass = "bi bi-droplet-fill", ThemeCssClass = "petro" },
                    new() { Title = "کشاورزی", IconCssClass = "bi bi-tree-fill", ThemeCssClass = "agri" }
                }
            };
        activeGroupData = new GroupActivityData
            {
                CompetitionValue = "+۱۲.۵٪",
                CompetitionPercentage = 0.75, // 75%
                DemandValue = "۲.۵x",
                DemandPercentage = 0.90, // 90%
                TotalValue = "۵.۸ همت",
                TotalVolume = "۸۴,۵۰۰ تن"
            };
    }
}

