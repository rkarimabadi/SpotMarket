<div class="offers-container-widget">
    <div class="segment-control">
        <button class="@GetSegmentClass("traded")" @onclick='() => SetActiveSegment("traded")'>
            <span>معامله شده</span>
        </button>
        <button class="@GetSegmentClass("untraded")" @onclick='() => SetActiveSegment("untraded")'>
            <span>در انتظار عرضه</span>
        </button>
        <button class="@GetSegmentClass("failed")" @onclick='() => SetActiveSegment("failed")'>
            <span>معامله نشد</span>
        </button>
    </div>

    <div class="offers-content">
        @switch (_activeSegment)
        {
            case "traded":
                <TradingHallTradedOffersList MarketId="MarketId" />
                break;
            case "untraded":
                <TradingHallUntradedOffersList MarketId="MarketId" />
                break;
            case "failed":
                <TradingHallFailedOffersList MarketId="MarketId" />
                break;
        }
    </div>
</div>

@code {
    [Parameter]
    public int MarketId { get; set; }

    private string _activeSegment = "traded";

    private void SetActiveSegment(string segment)
    {
        _activeSegment = segment;
    }

    private string GetSegmentClass(string segment) => _activeSegment == segment ? "segment-button active" : "segment-button";
}
