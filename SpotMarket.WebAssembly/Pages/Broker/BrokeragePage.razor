@page "/players/brokers/{brokerId:int}"

@inject NavStateService NavState
<PageTitle>@pageTitle</PageTitle>
<BrokerageHeader BrokerId="@brokerId" OnDataReceived="OnDataReceived"/>
<BrokerageCompetitionWidget BrokerId="@brokerId" />
<BrokerageMarketShareWidget BrokerId="@brokerId" />
<BrokerageRankingWidget BrokerId="@brokerId" />
<BrokerageCommodityGroupWidget BrokerId="@brokerId" />
<BrokerageOffersWidget BrokerId="@brokerId" />
<BrokerageCompetitionWidget BrokerId="@brokerId" />
<BrokerageTopSuppliersWidget BrokerId="@brokerId" />
<BrokerageAllSuppliersWidget BrokerId="@brokerId" />
<BrokerageStrategicPerformanceWidget BrokerId="@brokerId" />


@code {
    [Parameter]
    public int brokerId { get; set; }
    private string? pageTitle;
    private void OnDataReceived(BrokerHeaderData data)
    {
        if (data != null && !string.IsNullOrEmpty(data.BrokerName))
        {
            pageTitle = $"تحلیل عملکرد {data.BrokerName}";
            NavState.SetNavState(pageTitle, true);
        }
    }
}