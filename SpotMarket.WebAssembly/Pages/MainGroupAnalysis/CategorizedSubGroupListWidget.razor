@* این کامپوننت جدید، گروه‌ها را بر اساس وضعیت روزانه دسته‌بندی می‌کند *@

@if (SubGroupData is not null)
{
    <div class="categorized-list-container">
        @* بخش ۱: در صف عرضه *@
        <SubGroupCategoryWidget Title="در صف عرضه" Icon="bi-hourglass-split" Items="SubGroupData.OnOfferToday" />

        @* بخش ۲: داغ‌ترین معاملات امروز *@
        <SubGroupCategoryWidget Title="داغ‌ترین معاملات امروز" Icon="bi-fire" Items="SubGroupData.HottestDeals" />

        @* بخش ۳: عرضه‌های مهم پیش رو *@
        <SubGroupCategoryWidget Title="مهمانان ویژه" Icon="bi-calendar-event" Items="SubGroupData.UpcomingOffers" />

        @* بخش ۴: سایر گروه‌ها *@
        <SubGroupCategoryWidget Title="سایر گروه‌ها" Icon="bi-list-ul" Items="SubGroupData.OtherGroups" />
    </div>
}
else
{
    <p>در حال بارگذاری اطلاعات گروه‌ها...</p>
}


@code {
    [Parameter]
    public string? GroupName { get; set; }

    // مدل اصلی برای نگهداری تمام لیست‌های دسته‌بندی شده
    private CategorizedSubGroups? SubGroupData;

    protected override void OnInitialized()
    {
        // در اینجا باید منطق واکشی و دسته‌بندی داده‌ها از سرویس مربوطه پیاده‌سازی شود
        // در حال حاضر از داده‌های نمونه استفاده می‌کنیم
        LoadSampleData();
    }

    private void LoadSampleData()
    {
        // این داده‌ها باید بر اساس GroupName از سرویس واکشی شوند
        var onOffer = new List<SubGroupItem>
        {
            new SubGroupItem("ورق گرم", "عرضه فولاد مبارکه ساعت ۱۰:۳۰", "+۱.۲٪"),
            new SubGroupItem("میلگرد A3", "عرضه ذوب‌آهن اصفهان", "+۰.۸٪")
        };

        var hottest = new List<SubGroupItem>
        {
            new SubGroupItem("شمش فولادی", "رقابت ۱۲٪ بالاتر از قیمت پایه", "+۱۵.۴٪", "text-danger"),
            new SubGroupItem("مس کاتد", "تقاضای ۲.۵ برابری", "+۹.۱٪", "text-danger")
        };

        var upcoming = new List<SubGroupItem>
        {
            new SubGroupItem("ورق گالوانیزه", "عرضه سه‌شنبه ساعت ۱۱:۰۰", "+۰.۵٪")
        };

        var others = new List<SubGroupItem>
        {
            new SubGroupItem("تیرآهن", "آخرین معامله دیروز", "-۰.۲٪", "text-success"),
            new SubGroupItem("ورق سرد", "آخرین معامله دیروز", "+۱.۱٪")
        };

        SubGroupData = new CategorizedSubGroups(onOffer, hottest, upcoming, others);
    }


}
