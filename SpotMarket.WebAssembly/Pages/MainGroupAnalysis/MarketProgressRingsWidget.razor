@* بازطراحی دقیق با الهام از صفحه Daily Activity در Apple Watch *@

<div class="rings-progress-widget">
    <div class="widget-header">
        <h3 class="widget-title">فعالیت روزانه بازار</h3>
    </div>
    <div class="rings-container">
        <div class="rings-chart">
            <svg viewBox="0 0 100 100">
                <!-- Ring 1: صنعتی (بیرونی‌ترین) -->
                <path class="ring-track industrial" d="M 50,7 A 43,43 0 1 1 49.9,7" />
                <path class="ring-progress industrial" d="M 50,7 A 43,43 0 1 1 49.9,7" style="stroke-dashoffset: @(270.1 * (1 - ActivityData[0].Percentage));" />

                <!-- Ring 2: پتروشیمی (میانی) -->
                <path class="ring-track petro" d="M 50,18 A 32,32 0 1 1 49.9,18" />
                <path class="ring-progress petro" d="M 50,18 A 32,32 0 1 1 49.9,18" style="stroke-dashoffset: @(201 * (1 - (ActivityData[1].Percentage)));" />

                <!-- Ring 3: کشاورزی (داخلی‌ترین) -->
                <path class="ring-track agri" d="M 50,29 A 21,21 0 1 1 49.9,29" />
                <path class="ring-progress agri" d="M 50,29 A 21,21 0 1 1 49.9,29" style="stroke-dashoffset: @(131.9 * (1 - (ActivityData[2].Percentage)));" />
            </svg>
        </div>

        <div class="rings-details">
            @foreach (var item in ActivityData)
            {
                <div class="detail-item">
                    <div class="detail-info">
                        <span class="title @item.CssClass">@item.Title</span>
                        <span class="primary-metric">@item.PrimaryMetric</span>
                    </div>
                    <div class="secondary-metric">@item.SecondaryMetric</div>
                </div>
            }
        </div>
    </div>
</div>

@code {
    private List<MarketActivity> ActivityData { get; set; } = new();

    protected override void OnInitialized()
    {
        ActivityData = new List<MarketActivity>
        {
            new MarketActivity("صنعتی", "industrial", 0.92, "۹۲٪ انجام شده", "۵.۸ همت"),
            new MarketActivity("پتروشیمی", "petro", 0.78, "۷۸٪ انجام شده", "۴.۲ همت"),
            new MarketActivity("کشاورزی", "agri", 0.65, "۶۵٪ انجام شده", "۱.۱ همت")
        };
    }

    private record MarketActivity(
        string Title,
        string CssClass,
        double Percentage,
        string PrimaryMetric,
        string SecondaryMetric
    );
}
