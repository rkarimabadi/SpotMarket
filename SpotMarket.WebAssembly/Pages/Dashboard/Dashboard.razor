@page "/"
@inject NavStateService NavState
<PageTitle>داشبورد</PageTitle>
<div class="dashboard-container">
    
    <DashboardHeader />

@*     <WatchlistWidget/> *@

    <TradingHallsWidget />

    <MarketMoversWidget Data="marketMoversData" />
    
    <MainPlayersWidget Players="mainPlayersData" />

    <MarketExcitementWidget Data="marketExcitementData" />

    <MarketSentimentWidget />

    <SupplyRiskWidget />
    
    <NewsWidget/>

</div>

@code {
    protected override void OnInitialized()
    {
        NavState.SetNavState("کالا نما", false);
        LoadDemoData();
        base.OnInitialized();
    }
    private List<MainPlayer> mainPlayersData = new();
    private MarketExcitement? marketExcitementData;
    private MarketMoversData? marketMoversData;

    private void LoadDemoData()
    {
        mainPlayersData = new List<MainPlayer>
        {
            new()
            {
                Type = "برترین کارگزار",
                Name = "کارگزاری مفید",
                IconCssClass = "bi bi-person-workspace",
                MarketShare = 18.4m
            },
            new()
            {
                Type = "برترین عرضه‌کننده",
                Name = "فولاد مبارکه",
                IconCssClass = "bi bi-buildings-fill",
                MarketShare = 25.1m
            }
        };
        marketExcitementData = new MarketExcitement
        {
            Title = "تقاضای بالا",
            Description = "بخش عمده معاملات امروز به روش حراج باز انجام شده که نشان‌دهنده رقابت شدید و هیجان در بازار است.",
            Percentage = 70,
            Label = "حراج"
        };
        marketMoversData = new MarketMoversData
        {
            CompetitionItems = new List<MarketMoverItem>
            {
                new() { Rank = 1, Title = "ورق گالوانیزه", Subtitle = "فولاد مبارکه", Value = "+۱۲.۵٪", ValueState = ValueState.Positive },
                new() { Rank = 2, Title = "مس کاتد", Subtitle = "شرکت ملی مس", Value = "+۹.۸٪", ValueState = ValueState.Positive }
            },
            DemandItems = new List<MarketMoverItem>
            {
                new() { Rank = 1, Title = "سیمان تیپ ۲", Subtitle = "سیمان تهران", Value = "۳.۵x", ValueState = ValueState.Neutral },
                new() { Rank = 2, Title = "پلی‌پروپیلن", Subtitle = "پتروشیمی مارون", Value = "۲.۸x", ValueState = ValueState.Neutral }
            }
        };
    }
}
