@using SpotMarket.WebAssembly.Models.Presentation
@inject IDashboardService DashboardService
    <div class="widget-container">
        <div class="section-header">
            <h3 class="section-title">@Title</h3>
        </div>
        @if (data != null)
        {
        <div class="excitement-widget">
            <div class="excitement-chart">
                <svg width="100" height="100" viewBox="0 0 36 36">
                    <circle cx="18" cy="18" r="15.915" fill="none" stroke="var(--gray-200)" stroke-width="4"></circle>
                    <circle cx="18" cy="18" r="15.915" fill="none" stroke="var(--primary-color)" stroke-width="4" stroke-dasharray="@data.Percentage, 100" stroke-linecap="round"></circle>
                </svg>
                <div class="excitement-chart-center-text">
                    <div class="value">@data.Percentage%</div>
                    <div class="label">@data.Label</div>
                </div>
            </div>
            <div class="excitement-info">
                <h4 class="title">@data.Title</h4>
                <p class="subtitle">@data.Description</p>
            </div>
        </div>
        }
    </div>

@code {
    [Parameter]
    public string Title { get; set; } = "سطح هیجان بازار";
    private MarketExcitementData? data;

    protected override async Task OnInitializedAsync()
    {
        data = await DashboardService.GetMarketExcitement();

    }
}
